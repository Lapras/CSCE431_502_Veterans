<!-- app/views/admin/attendance_reports/index.html.erb -->
<% content_for :title, "Attendance History" %>

<h1 class="page-title">Attendance History</h1>

<%= form_with url: admin_attendance_reports_path, method: :get, local: true, class: "search-form" do %>

  <div class="form-row">
    <label for="q">Search name or email</label>
    <input type="text" id="q" name="q" value="<%= h @q %>" />
    <button type="submit">Search</button>
    <% if @q.present? %>
      <%= link_to "Clear", admin_attendance_reports_path %>
    <% end %>
  </div>

  <div class="form-row" style="margin-top: 1em;">
    <label for="last_n">Events to include (e.g., 3 = last 3 events):</label>
    <input
      type="number"
      id="last_n"
      name="last_n"
      value="<%= params[:last_n] %>"
      min="1"
      class="event-count-input"
    />
    <button type="submit" name="show_summary" value="1">View Summary Statistics</button>
  </div>

<% end %>


<turbo-frame id="attendance_table">
  <%= render "table" %>
</turbo-frame>